* nixos-rebuild
  Use `repl` subcommand to open a convenient repl. That's mostly equivalent to
  running `:lf ...`, `config = nixosConfigurations.<sys>.config`, etc.

  `build-vm` can build nice qemu vms. You can pass extra qemu args to the
  script, e.g.:
  - `-vnc 0.0.0.0:0` for VNC.
  - `-spice port=5900,disable-ticketing=on` for SPICE and better performance
    then VNC.
  - `-m 8192` for more memory (8GiB here)
  - `-smp 4` for more cpu (4 here)

  You can use that to test your configurations on remote servers, by using e.g.
  `remmina` to connect to VNC/SPICE.

* Installers
  There are a couple installers and you can build your own.
  To create an installer provide a configuration through a flake or a nix file, which has some module from `${modulesPath}/installer/` as import. E.g. `${modulesPath}/installer/cd-dvd/installation-cd-minimal.nix` - the one you would most commonly use.
  Example configuration:
  @code nix
  {
    nixosConfigurations.installer = nixpkgs.lib.nixosSystem {
      system = "x86_64-linux";
      specialArgs = { inherit inputs; };
      modules = [
        ({ pkgs, modulesPath, lib, ... }: {
          imports = [
            "${modulesPath}/installer/cd-dvd/installation-cd-minimal.nix"
          ];
          boot.kernelPackages = pkgs.linuxPackages_latest;
          boot.supportedFilesystems = lib.mkForce [ "btrfs" "reiserfs" "vfat" "f2fs" "xfs" "ntfs" "cifs" ];
          users.users.nixos.openssh.authorizedKeys.keyFiles = [ ./ssh/mykey ];
        })
        ./modules/default/tools.nix
      ];
    };
  }
  @end
  Building configurations can be done with `nixos-generate --flake .#installer --format iso -o result` from `nixos-generators`. Beware that the process is quite slow due to `squashfs` generation and can take around 6 minutes.
  Try out your installer before flashing with `nixos-rebuild build-vm --flake .#installer`.
  Flash resulting iso with `dd if=result/iso/nixos-smth.iso of=/dev/disk/by-id/usb-ID status=progress && sync`.
